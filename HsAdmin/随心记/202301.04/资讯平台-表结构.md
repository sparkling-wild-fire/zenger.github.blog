```oracle
prompt '资讯同步管理表';
declare
    icnt number := 0;
begin
    select count(*) into icnt from user_tables where lower(table_name) = 'tstp_info_synmanager';
    if icnt = 0 then
        execute immediate 'create table tstp_info_synmanager
        (
            table_name varchar2(128),
            table_caption varchar2(128),
            use_flag char(1),
            last_syn_date_time date,
            create_date_time date,    
            update_date_time date,
            constraint pk_tstp_info_synmanager primary key (table_name)
        )';
    end if;
end;
/

prompt '资讯来源表';
declare
icnt number := 0;
begin
    select count(*) into icnt from user_tables where lower(table_name) = 'tstp_info_source';  --- 这个表还没创建，count(*)是0
    if icnt = 0 then
        execute immediate 'create table tstp_info_source
        (
            source_id number(8,0),
            table_caption varchar2(128),
            source_name varchar2(128),
            create_date_time date,
            update_date_time date,    
            constraint pk_tstp_info_source primary key (source_id)
        )';
    end if;
end;
/

prompt '资讯源同步参考配置表';
declare
    icnt number := 0;
begin
    select count(*) into icnt from user_tables where lower(table_name) = 'tstp_info_sourceconfig';
    if icnt = 0 then
        execute immediate 'create table tstp_info_sourceconfig
        (
            source_id number(8,0),
            table_name varchar2(128),
            task_name varchar2(128),
            db_type char(1),
            sql_stmt varchar2(4000),
            create_date_time date,
            update_date_time date,    
            constraint pk_tstp_info_sourceconfig primary key (source_id, table_name, task_name, db_type)
        )';
    end if;
end;
/

prompt '资讯源表';
declare
    icnt number := 0;
begin
    select count(*) into icnt from user_tables where lower(table_name) = 'tstp_info_datasource';
    if icnt = 0 then
        execute immediate 'create table tstp_info_datasource
        (
            info_id number(8,0),
            info_name varchar2(128),
            source_id number(8,0),
            db_link varchar2(512),
            db_type char(1),
            db_user varchar2(32),
            db_pwd varchar2(128),
            create_date_time date,
            update_date_time date,    
            constraint pk_tstp_info_datasource primary key (info_id)
        )';
    end if;
end;
/

-- 每个table_name task_name use_flag=1 的记录只能有一条  => 可以直接把这三个参数设置为唯一性约束吗
-- use_flag要设置默认值0吧？
prompt '资讯同步配置表';
declare
    icnt number := 0;
begin
    select count(*) into icnt from user_tables where lower(table_name) = 'tstp_info_synconfig';
    if icnt = 0 then
        execute immediate 'create table tstp_info_synconfig
        (
            config_id number(8,0),
            table_name varchar2(128),
            task_name varchar2(128),
            info_id char(1),
            sql_stmt varchar2(4000),
            use_flag char(1),
            create_date_time date,
            update_date_time date,    
            constraint pk_tstp_info_synconfig primary key (config_id)
        )';
    end if;
end;
/

prompt '日行情表';
declare
    icnt number := 0;
begin
    select count(*) into icnt from user_tables where lower(table_name) = 'tstp_info_quotedaily';
    if icnt = 0 then
        execute immediate 'create table tstp_info_quotedaily
        (
            trade_date date,
            market_no number(8,0),
            stock_code varchar2(32),
            close_price number(20,12),  
            open_price number(20,12),
            closing_price number(20,12),
            max_price number(20,12),
            min_price number(20,12),
            deal_balance number(18,6),
            deal_amount number(20,4),
            deal_count number(10,0),
            top_price number(20,12),
            bottom_price number(20,12),
            stop_flag char(1),
            create_date_time date,
            update_date_time date,  
            constraint pk_tstp_info_quotedaily primary key (trade_date, market_no, stock_code)
        )';
    end if;
end;
/

prompt '复权因子表';
declare
    icnt number := 0;
begin
    select count(*) into icnt from user_tables where lower(table_name) = 'tstp_info_rstrfactor';
    if icnt = 0 then
        execute immediate 'create table tstp_info_rstrfactor
        (
            trade_date date,
            market_no number(8,0),
            stock_code varchar2(32),
            rstr_factor number(24,8),
            create_date_time date,
            update_date_time date,    
            constraint pk_tstp_info_rstrfactor primary key (trade_date, market_no, stock_code)
        )';
    end if;
end;
/
```



